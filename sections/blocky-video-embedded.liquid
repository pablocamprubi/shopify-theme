{%- comment -%}
  Â© BlockyApps. You are permitted to use this content within your store. Redistribution or use in any other application is strictly prohibited. 
  Unauthorized copying, distribution, or reproduction in any form will result in legal action.
{% endcomment %}
<script src="{{ 'blocky-video.js' | asset_url }}" defer></script>

<style>
  .blocky-media-hero-window svg, .blocky-media-hero-window img, .blocky-media-hero-window video, 
  .blocky-media-hero-container, .blocky-media-hero-container .bky-vid-placeholder{
    border-radius: var(--border-radius, 30px);
  }
  .blocky-media-hero-container:has(.bky-vid-placeholder) {
    overflow: visible;
  }
  .blocky-video-embed-autoplay .blocky-button,
  .blocky-video-embed-autoplay .blocky-media-hero-container {
    pointer-events: auto;
  }
  .blocky-video-embed-autoplay .blocky-media-hero-text-wrap {
    pointer-events: none;
  }
</style>


<div 
  class="blocky blocky-padding"
  style="--padding-top: {{ section.settings.padding_top }}; --padding-bottom: {{ section.settings.padding_bottom }}; --overlay_opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }}; --section-page-width: {{ section.settings.page_width | divided_by: 10 }}rem; --border-radius: {{ section.settings.border_radius }}px;"
>
  <div {% if section.settings.full_screen == false %}class="blocky-page-width blocky-media-hero-window"{% endif %}>
    <div class="blocky-media-hero blocky-media-hero-{{ section.settings.section_height }} blocky-media-hero-mobile-{{ section.settings.mobile_height }}{% if section.settings.autoplay == false %} blocky-video-embed-autoplay{% endif %}" >
      <div class="blocky-media-hero-container">
        {% render "blocky-video", video: section.settings.video, video_fit: section.settings.video_fit, autoplay: section.settings.autoplay, button_color: section.settings.play_button_color, background_button_color: section.settings.play_button_background_color %}          
      </div>

      <div class="blocky-media-hero-text-wrap{% if section.settings.overlay_opacity != 0 %} blocky-media-hero-text-wrap-opacity{% endif %}"> 
        <div class="blocky-page-width blocky-media-hero-text-content {{ section.settings.text_align }}">
          {%- for block in section.blocks -%}
            {% case block.type %}
              {%- when 'title' -%}
                {% render 'blocky-titlel', block: block %}
              {%- when 'body' -%}
                {% render 'blocky-bodyl', block: block %}
              {%- when 'button' -%}
                {%- if block.settings.button_label != blank -%}
                  <div>
                    {% render 'blocky-buttonl', block: block %}
                  </div>
                {%- endif -%}
              {%- when 'review-stars' -%}
                {% render 'blocky-review-starsl', block: block %}
            {%- endcase -%}
          {%- endfor -%}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
{
  "name": "BKY - Video Embed",
  "disabled_on": {"groups": [ "header", "footer" ]},
  "settings": [
    {
      "type": "header",
      "content": "Video"
    },
    {
      "type": "video",
      "id": "video",
      "label": "Background Video"
    },
    {
      "type": "checkbox",
      "id": "autoplay",
      "label": "Autoplay",
      "default": true,
    },
    {
      "type": "color",
      "id": "play_button_color",
      "default": "#FFFFFF",
      "label": "Play button color",
      "info": "The play button only shows if autoplay is off"
    },
    {
      "type": "color",
      "id": "play_button_background_color",
      "default": "#DCDCDC",
      "label": "Play button background color",
    },
    {
      "type": "header",
      "content": "Layout"
    },
    {
      "type": "select",
      "id": "section_height",
      "label": "Desktop height",
      "default": "550px",
      "options": [
        {
          "label": "450px",
          "value": "450px"
        },
        {
          "label": "550px",
          "value": "550px"
        },
        {
          "label": "650px",
          "value": "650px"
        },
        {
          "label": "750px",
          "value": "750px"
        },
        {
          "label": "Full-Screen",
          "value": "100vh"
        }
      ]
    },   
    {
      "type": "select",
      "id": "mobile_height",
      "label": "Mobile Height",
      "default": "500px",
      "options": [
        {
          "label": "250px",
          "value": "250px"
        },
        {
          "label": "300px",
          "value": "300px"
        },
        {
          "label": "400px",
          "value": "400px"
        },
        {
          "label": "500px",
          "value": "500px"
        },
        {
          "label": "Full-Screen",
          "value": "100vh"
        }
      ]
    },
    {
      "type": "select",
      "id": "video_fit",
      "options": [
        {
          "value": "fit",
          "label": "Fit"
        },
        {
          "value": "zoomed",
          "label": "Zoomed in"
        }
      ],
      "default": "zoomed",
      "label": "Video fit"
    },
    {
      "type": "range",
      "id": "border_radius",
      "label": "Border radius",
      "default": 30,
      "min": 0,
      "max": 50,
      "step": 1,
      "unit": "px"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "label": "Background video darkness",
      "info": "Lower the brightness of your video to make your text easier to read",
      "default": 0,
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "%"
    },
    {
      "type": "select",
      "id": "text_align",
      "label": "Text alignment",
      "default": "vertical-center horizontal-center",
      "options": [
        {
          "value": "vertical-top horizontal-left",
          "label": "Top left"
        },
        {
          "value": "vertical-top horizontal-center",
          "label": "Top center"
        },
        {
          "value": "vertical-top horizontal-right",
          "label": "Top right"
        },
        {
          "value": "vertical-center horizontal-left",
          "label": "Center left"
        },
        {
          "value": "vertical-center horizontal-center",
          "label": "Center"
        },
        {
          "value": "vertical-center horizontal-right",
          "label": "Center right"
        },
        {
          "value": "vertical-bottom horizontal-left",
          "label": "Bottom left"
        },
        {
          "value": "vertical-bottom horizontal-center",
          "label": "Bottom center"
        },
        {
          "value": "vertical-bottom horizontal-right",
          "label": "Bottom right"
        }
      ]
    },
    {
      "type": "checkbox",
      "id": "full_screen",
      "label": "Cover full screen",
      "default": false
    },


    {
      "type": "header",
      "content": "Section size",
    },
    {
      "type": "range",
      "id": "page_width",
      "unit": "px",
      "step": 100,
      "min": 800,
      "max": 1600,
      "default": 1200,
      "label": "Section width",
    },
    {
      "type": "range",
      "id": "padding_top",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Top padding",
      "default": 50
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "min": 0,
      "max": 100,
      "step": 2,
      "unit": "px",
      "label": "Bottom padding",
      "default": 50
    }
  ],    
  "blocks": [
    {
      "type": "title",
      "name": "Title",
      "limit": 1,
      "settings": [
        {
          "type": "inline_richtext",
          "id": "title",
          "default": "<b>Video Embed</b>",
          "label": "Title",
          "info": "Leave the text blank to hide the title."
        },
        {
          "type": "range",
          "id": "title_size",
          "label": "Title size",
          "default": 60,
          "min": 30,
          "max": 100,
          "unit": "px"
        },
        {
          "type": "color",
          "id": "title_color",
          "label": "Title color",
          "default": "#000000"
        },
      ]
    },
    {
      "type": "body",
      "name": "Body",
      "limit": 4,
      "settings": [
        {
          "type": "richtext",
          "id": "body_text",
          "default": "<p>Grab your customers attention with ease</p>",
          "label": "Body",
          "info": "Leave the text blank to hide the body."
        },
        {
          "type": "range",
          "id": "body_size",
          "label": "Body size",
          "default": 16,
          "min": 10,
          "max": 30,
          "unit": "px"
        },
        {
          "type": "color",
          "id": "body_color",
          "label": "Body color",
          "default": "#000000"
        },
      ]
    },
    {
      "type": "button",
      "name": "Button",
      "limit": 1,
      "settings": [
        {
          "type": "text",
          "id": "button_label",
          "label": "Button label",
          "default": "Button link",
          "info": "Leave the text blank to hide the button."
        },
        {
          "type": "url",
          "id": "button_link",
          "label": "Button link"
        },
        {
          "type": "select",
          "id": "button_border_radius",
          "label": "Button border radius",
          "default": "curved",
          "options": [
            {
              "value": "flat",
              "label": "Flat"
            },
            {
              "value": "curved",
              "label": "Curved"
            },
            {
              "value": "round",
              "label": "Round"
            },
            {
              "value": "extra-round",
              "label": "Extra Round"
            }
          ]
        },
        {
          "type": "select",
          "id": "button_style",
          "label": "Button style",
          "default": "regular",
          "options": [
              {
                "value": "outline",
                "label": "Outline"
              },
              {
                "value": "regular",
                "label": "Regular"
              }
          ]
        },
        {
          "type": "color",
          "id": "button_background_color",
          "label": "Button background color",
          "default": "#2065D1"
        },
        {
          "type": "color",
          "id": "button_text_color",
          "label": "Button text color",
          "default": "#FFFFFF"
        },
      ]
    },
    {
      "type": "review-stars",
      "name": "Review Stars",
      "limit": 1,
      "settings": [
         {
          "type": "range",
          "id": "rating",
          "label": "Rating",
          "min": 0,
          "max": 5,
          "step": 0.1,
          "default": 5,
          "info": "Set the rating to 0 to hide the stars"
        },
        {
          "type": "color",
          "id": "star_color",
          "default": "#ffcc00",
          "label": "Stars color"
        },
        {
          "type": "color",
          "id": "review_text_color",
          "label": "Review text color",
          "default": "#000000"
        },
    
        {
          "type": "select",
          "id": "empty_stars_style",
          "options": [
            {
              "value": "outlined",
              "label": "Outlined"
            },
            {
              "value": "hidden",
              "label": "Hidden"
            }
          ],
          "label": "Empty stars style",
          "default": "hidden"
        },
        {
          "type": "inline_richtext",
          "id": "review_text",
          "label": "Text",
          "default": "Based on over <b>1000+</b> Reviews"
        },
        {
          "type": "range",
          "id": "review_font_size",
          "min": 10,
          "max": 24,
          "step": 1,
          "unit": "px",
          "default": 16,
          "label": "Text size"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "Blocky Video Embed",
      "blocks": [
        {
          "type": "title"
        },
        {
          "type": "body"
        },
        {
          "type": "button"
        }
      ]
    }
  ]
}
{% endschema %}
