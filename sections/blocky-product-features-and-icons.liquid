{%- comment -%}
  Â© BlockyApps. You are permitted to use this content within your store. Redistribution or use in any other application is strictly prohibited. 
  Unauthorized copying, distribution, or reproduction in any form will result in legal action.
{% endcomment %}
<style>
  .blocky-ciwi-image img,
  .blocky-ciwi-video video,
  .blocky-ciwi-video .blocky-video {
    width: 100%;
  }
  .blocky-ciwi-image-placeholder {
    height: var(--media-size);
    aspect-ratio: 9/16;
    max-width: 100vw;
  }
  @media screen and (max-width: 749px) {
    .blocky-ciwi-video:has(.bky-vid-placeholder) {
      width: 100%;
    }
    .blocky-ciwi-image-placeholder {
      height: 500px;
    }
  }
  .blocky-ciwi-container.hide-icon-code-shadow .iwt-icon-container {
    box-shadow: unset;
    background: unset;
  }
  .blocky-ciwi-container.hide-icon-code-shadow .iwt-icon-container .iwt-icon {
    font-size: 60px !important;
    max-width: 60px;
  }
  .blocky-ciwi .blocky-video-play-button svg {
    box-shadow: none;
  }
</style>

<script src="{{ 'blocky-video.js' | asset_url }}" defer></script>
<div class="blocky background-wrapper"
  style="--padding-top: {{ section.settings.padding_top }}; --padding-bottom: {{ section.settings.padding_bottom }}; --background-color: {{ section.settings.background_color }};
  --title-color: {{ section.settings.title_color }}; --description-color: {{ section.settings.body_color }}; --section-page-width: {{ section.settings.page_width | divided_by: 10 }}rem;
  --media-size: {{ 500 | times: section.settings.media_size | divided_by: 100 }}px;"
>
  <div class="blocky-padding blocky-page-width">
    <div class="blocky-ciwi">
      <div class="blocky-ciwi-text-container blocky-ciwi-text-container-{{ section.settings.text_layout }}">
        {% render 'blocky-bodyl', block: section %}
        {% render 'blocky-titlel', block: section %}
      </div>

      <div class="blocky-ciwi-container{% if section.settings.show_icon_code_shadow == false %} hide-icon-code-shadow{% endif %}">
        <div class="blocky-ciwi-icon-container blocky-ciwi-icon-container-0">
          {% for block in section.blocks %}
            {% assign mod = forloop.index | modulo: 2 %}
            {% if mod != 0 %}
              {% render 'blocky-icon-with-textl', block: block, side: 0, index: forloop.index, icon_position: section.settings.icon_position %}
            {% else %}
              {% render 'blocky-icon-with-textl', block: block, side: 1, index: forloop.index, icon_position: section.settings.icon_position %}
            {% endif %}
          {% endfor %}
        </div>
        <div class="blocky-ciwi-image blocky-ciwi-image-container{% if section.settings.show_shadow %} blocky-ciwi-image-shadow{% endif %}">
          {% if section.settings.image and section.settings.video == blank %}
            <img
              src="{{ section.settings.image | image_url: height: 350 }}"
              alt="{{ section.settings.heading }}"
            >
          {% else %}
            <div class="blocky-ciwi-video">
              {% render "blocky-video", video: section.settings.video, video_fit: section.settings.video_fit, autoplay: section.settings.autoplay, button_color: section.settings.play_button_color, background_button_color: section.settings.play_button_background_color %}      
            </div>
          {% endif %}
        </div>
        <div class="blocky-ciwi-icon-container blocky-ciwi-icon-container-1">
          {% for block in section.blocks %}
            {% assign mod = forloop.index | modulo: 2 %}
            {% if mod == 0 %}
              {% render 'blocky-icon-with-textl', block: block, side: 1, index: forloop.index, icon_position: section.settings.icon_position %}
            {% else %}
              {% render 'blocky-icon-with-textl', block: block, side: 0, index: forloop.index, icon_position: section.settings.icon_position %}
            {% endif %}
          {% endfor %}
        </div>
      </div>
    </div>
  </div>
</div>

{% schema %}
  {
    "name": "BKY - Product Icons",
    "disabled_on": { "groups": [ "header", "footer" ] },
    "settings": [
      {
        "type": "image_picker",
        "id": "image",
        "label": "Image"
      },
      {
        "type": "video",
        "id": "video",
        "label": "Video"
      },    
      {
        "type": "select",
        "id": "video_fit",
        "options": [
          {
            "value": "fit",
            "label": "Fit"
          },
          {
            "value": "zoomed",
            "label": "Zoomed in"
          }
        ],
        "default": "zoomed",
        "label": "Video fit"
      },

      {
        "type": "range",
        "id": "media_size",
        "min": 0,
        "max": 200,
        "step": 2,
        "unit": "%",
        "label": "Media Size",
        "default": 100
      },
      {
        "type": "checkbox",
        "id": "autoplay",
        "label": "Autoplay",
        "default": true,
      },
      {
        "type": "color",
        "id": "play_button_color",
        "default": "#FFFFFF",
        "label": "Play button color",
        "info": "The play button only shows if autoplay is off"
      },
      {
        "type": "color",
        "id": "play_button_background_color",
        "default": "#000000",
        "label": "Play button background color",
      },

      {
        "type": "header",
        "content": "Text"
      },
      {
        "type": "richtext",
        "id": "body_text",
        "default": "<p>Easily show off your product and its main features with easy to identify icons</p>",
        "label": "Ad Description",
        "info": "Leave the text blank to hide the body."
      },
      {
        "type": "color",
        "id": "body_color",
        "label": "Description Color",
        "default": "#000000",
      },

      {
        "type": "inline_richtext",
        "id": "title",
        "label": "Title",
        "default": "<b>Product Icons</b>"
      },
      {
        "type": "range",
        "id": "title_size",
        "label": "Title size",
        "default": 60,
        "min": 30,
        "max": 100,
        "unit": "px"
      },
      {
        "type": "color",
        "id": "title_color",
        "label": "Title Color",
        "default": "#000000",
      },
      
      {
        "type": "header",
        "content": "Layout"
      },
      {
        "type": "select",
        "id": "text_layout",
        "options": [
          {
            "value": "body-first",
            "label": "Body first"
          },
          {
            "value": "title-first",
            "label": "Title first"
          }
        ],
        "default": "body-first",
        "label": "Text placement",
      },
      {
        "type": "select",
        "id": "icon_position",
        "options": [
          {
            "value": "next-to",
            "label": "Next to text"
          },
          {
            "value": "top",
            "label": "Top of text"
          }
        ],
        "default": "top",
        "label": "Icon placement",
      },
      {
        "type": "color",
        "id": "background_color",
        "label": "Background Color",
        "default": "#FFFFFF"
      },

      {
        "type": "checkbox",
        "id": "show_shadow",
        "label": "Show Shadow",
        "default": true
      },
      {
        "type": "checkbox",
        "id": "show_icon_code_shadow",
        "label": "Show Icon Code Shadow",
        "default": false
      },
      {
        "type": "header",
          "content": "Section size",
      },
      {
        "type": "range",
        "id": "page_width",
        "unit": "px",
        "step": 100,
        "min": 800,
        "max": 1600,
        "default": 1200,
        "label": "Section width",
      },
      {
        "type": "range",
        "id": "padding_top",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Top padding",
        "default": 36
      },
      {
        "type": "range",
        "id": "padding_bottom",
        "min": 0,
        "max": 100,
        "step": 4,
        "unit": "px",
        "label": "Bottom padding",
        "default": 36
      }
    ],
    "blocks": [
      {
        "type": "icon",
        "name": "Icon",
        "limit": 6,        
        "settings": [
          {
            "type": "header",
            "content": "Icons",
          },
          {
            "type": "select",
            "id": "icon_choice",
            "options": [
              {
                "value": "icon",
                "label": "Icon Code"
              },
              {
                "value": "image",
                "label": "Image"
              }
            ],
            "default": "icon",
            "label": "Icon",
            "info": "If there is no image, the icon code will be shown regardless of this option."
          },
          {
             "type": "image_picker",
             "id": "icon_image",
             "label": "Icon",
             "info": "Recommended size: 60x60."
          },
          {
            "type": "text",
            "id": "icon_code",
            "label": "Icon Code",
            "default": "check_circle",
            "info": "Get icon codes from [this link](https://fonts.google.com/icons/). example: 'check_circle', 'search', 'home'. For help adding icons, you can click [here](/admin/apps/blocky-apps/icons)"
          },
          {
            "type": "color",
            "id": "icon_color",
            "label": "Icon Color",
            "default": "#000000"
          },       
          {
              "type": "richtext",
              "id": "icon_heading",
              "label": "Icon Heading",
              "default": "<h3><b>Feature</b></h3>"
          },
          {
            "type": "color",
            "id": "icon_heading_color",
            "label": "Icon Heading Color",
            "default": "#000000",
          },
          {
              "type": "richtext",
              "id": "icon_description",
              "label": "Icon Text",
              "default": "<p>Highlight why this feature is important</p>"
          },
          {
            "type": "color",
            "id": "icon_text_color",
            "label": "Icon Text Color",
            "default": "#000000",
          },
        ]
      }
    ],
    "presets": [
      {
        "name": "Blocky Product Icons",
        "blocks": [
            {
              "type": "icon"
            },
            {
              "type": "icon"
            },
            {
              "type": "icon"
            },
            {
              "type": "icon"
            }
        ]
      }
    ],
    
  }
{% endschema %}
